// truffle development environment
truffle develop

// contract reference
let instance = await <contract name>.deployed()

// returns a promise
let response = await instance.<function name>();

nota: is pones await, devuelve el big number. 
      si no pones await, de devuelve la promesa

// unpacks a uint256
response.toString();

// unpacks a promise
response.then((r) => console.log(r))

// accounts reference
let accounts = await web3.eth.getAccounts()
truffle(develop)> instance.sendCoin(accounts[1], 10, {from: accounts[0]})

// deploy command to rinkeby testnet
truffle migrate --reset --network rinkeby

// interact with rinkeby testnet via truffle console
truffle console --network rinkeby


Debugging
################

en una terminal aparte: 
$ truffle develop --log

en otra terminal
truffle test

ver el id del contrato en ventana 1 
en ventana 2:
$ truffle debug <contract id>

add breakpoints and watches



Express + Heroku Project
################

// to run express locally
$ node app.js

// to deploy from development branch
$ git push heroku dev:main

$ heroku logs --tail

// deployed consensys final project
https://cfp-token-vines-jjl.herokuapp.com/



Openzeppellin contract versions compatible with the project:
##############

+ @openzeppelin/contracts@3.2.0

$ npm install @openzeppelin/contracts@3.2.0




Ganache Cli testing environment
#########################

1. $ ganache-cli -p 7557 --chainId 1875 --mnemonic "cube ring panel future project later maximum couch slush leaf lift arrest"
[switch terminal]
2. $ truffle-console --network ganacheCli
[switch terminal]
3. node app.js
[switch to truffle console terminal]
2. $ truffle migrate 
3. [copy contract address to const in dapp.js]
4. [copy abi from build/contracts/TokenVines.json to const in dapp.js]
5. [import temporary ganache-cli account to metamask via private key]
6. access or refresh http://localhost:3000

$ truffle console --network <name of ganache-cli network>
$ truffle test --network <name of ganache-cli network>
$ web3.eth.getChainId().then(console.log)
returns chainId specified (sanity check)

important! truffle migrate --reset 
      each time a change in TokenVines.sol